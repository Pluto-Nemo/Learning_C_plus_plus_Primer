# 3.2 标准库类型string

标准库类型**string**定义在命名空间std中，表示可变长的字符序列，使用string类型必须首先包含string头文件。



### 3.2.1 定义和初始化string对象

初始化string对象的方式：

```cpp
//默认初始化，s1为空串
string s1;			  //1
//s2是s1的副本
string s2(s1);		  //2
string s2 = s1;		  //3
//s3是字面值"value"的副本，字面值最后的空字符除外
string s3("value");	  //4
string s3 = "value";  //5
//s4初始化为由连续n个字符c组成的串
string s4(n,'c');	  //6
```

#### 直接初始化和拷贝初始化

**拷贝初始化**（copy initialization）：使用等号初始化一个变量。（上面的3、5）

**直接初始化**（direct initialization）：不使用等号进行初始化。（上面的1、2、4）





### 3.2.2 string对象上的操作

#### 读写操作

可以使用IO操作符读写string对象。

执行读取操作时，string对象会自动**忽略开头的空白**（即空格符、换行符、制表符等），并从第一个真正的字符开始读起，直到遇见下一处空白为止。

##### 使用getline读取一整行：

当我们想在最终得到的字符串中**保留输入时的空白符**时，使用**getline**函数代替原来的>>运算符。

```cpp
getline(istream& is, string& str);//&暂时不用管，是后面函数参数传递要学的内容
```

**参数：**它有两个参数，一个输入流（如cin）和一个string对象，getline只要一遇到**换行符**就结束读取操作并返回结果，读取时换行符会被读入，但存入string对象时换行符不会被存入。

**返回值：**getline和输入运算符一样，也会**返回它的流参数**，因此也可以作为判断的条件，如：

```cpp
while(getline(cin,line))
```



#### empty和size操作

**empty**函数根据string对象是否为空返回一个对应的布尔值，常与**逻辑非运算符（!）**配合使用。

**size**函数返回string对象的长度（即string对象中字符的个数），可以与比较运算符配合使用以进行限制字符长度的操作。



#### string::size_type类型

size函数返回的是一个**string::size_type类型**的值。它是一个无符号类型的值，并且能足够存放下任何string对象的大小。

因为它是一个unsigned，所以需要注意不要和signed类型混用。

#### 

#### 比较操作

string类中定义了几类比较运算符。运算过程中，比较运算符会**逐一**比较string对象中的字符，并且**对大小写敏感**。

注意：

- string对象相等意味着它们的长度和包含的字符都相同。
- 相等性运算符和关系运算符都依照（大小写敏感的）字典顺序对string对象进行比较。

​			

#### 赋值操作

一般来说，在设计标准库类型时都力求在易用性上向内置类型看齐，因此大多数库类型都支持赋值操作，string对象也不例外，此处不再赘述。



#### 加操作

- **两个string对象相加**，其内容是把左侧的运算对象与右侧的运算对象串接而成。

- **字面值和string对象相加**，标准库会将字符字面值和字符串字面值转换成string对象后相加。

  注意不能把字面值直接相加，当把string对象和字符字面值及字符串字面值混在一条语句中使用时，必须确保每个加法运算符两侧的对象至少有一个是string。



更多操作查表3.2





### 3.2.3 处理string对象中的字符

