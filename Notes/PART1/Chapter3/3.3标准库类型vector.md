# 3.3 标准库类型vector

标准库类型**vector**，又称**容器**（container），表示对象的集合，其中**所有对象的类型都相同**。集合中的每个对象都有一个与之对应的索引，索引用于访问对象

使用前需要包含头文件<**vector**>。

vector是一个**类模板**（class template），需要在模板名字后面跟一对尖括号**<>**，在括号中提供vector所**存放对象的类型**。

```cpp
//例：
vector<int> ivec；
vector<vector<Sales_item> Sales_vec;
```



### 3.3.1 定义和初始化vector对象

下面列举几种初始化vector对象的方法：

- **列表初始化**

  ```cpp
  vector<string> v1{"a","an","the"};
  ```

- 使用vector对象容纳的**元素数量**和所有元素的**统一初始值**来初始化

  ```cpp
  vector<int> ivec(10,-1);  //10个int类型的元素，每个都被初始化为-1
  ```

  - 也可以**只提供元素数量**，此时库会创建一个**值初始化**（value-initialized）的元素初值并赋给容器中的所有元素。这个初值由vector中元素的类型决定。

    这种方式不适用于不支持默认初始化的元素类型，且只能使用直接初始化。

    ```cpp
    vector<string> svec(10);  //10个元素，每个都是空string对象。
    ```

更多方法详见表3..4

另，注意：

- 当把一个 vector拷贝给另一个vector时，两个对象的**类型必须相同**。
- 对于vector对象来说，直接初始化的方法适用于三种情况：
  - 初始值已知且数量较少
  - 初始值是另一个vector对象的副本
  - 所有元素的初始值一样



### 3.3.2 向vector对象中添加元素

C++标准要求vector能在运行时高效快速地添加元素，因此在定义时设定其大小也就没什么必要了。

可以使用 vector的成员函数**push_back**向其中添加元素，例：

```cpp
vector<int> v2;
for(int i = 0; i != 100; ++i)
    v2.push_back(i);   //依次把整数0-99放到v2尾端
```

注意：如果循环体内部包含有向vector对象添加元素的语句，则不能使用范围for循环。（具体原因5.4.3节有详解）



### 3.3.3 其他vector操作

vector支持的几种操作大多数都和string的相关操作类似，就不展开叙述了。详见表3.5

需要强调的是vector对象**不能通过下标的形式来添加元素**，正确的方法是使用push_back。vector和string对象的下标运算符都只能用于访问**已存在**的元素，访问不存在的元素可能导致缓冲区溢出（buffer overflow）。解决这个问题的一种有效手段就是尽可能使用**范围for语句**。

