# 1.2 初识输入输出

C++语言使用一个**标准库**（standard library）来提供**输入输出**（IO）机制。

- 标准库包含两个基础类型：
  - istream：input stream，输入流
  - ostream：output stream，输出流

#### 流（stream）

- 一个流就是一个字符序列，是从IO设备读出或写入IO设备的。

- 流的含义：随着时间的推移，字符是顺序生成或消耗的。
- 可以类比河流，进行形象化的理解：
  - 当我们做输入操作时，要输入的字符序列从输入设备（键盘）“流向”对应的变量，被变量存储起来
  - 当我们做输出操作时，要输出的字符序列“流向”输出设备（屏幕），被我们看到



#### 标准库的使用

使用`#include <头文件名>`指令将标准库引入。如使用iostream库时需在源文件开始位置添加代码：

```cpp
#include <iostream>
```



#### 标准输入输出对象

标准库中定义了4个IO对象：

- `cin ` ： 标准输入（standard input）
- `cout`：标准输出（standard output）
- `cerr`：标准错误（standard error）
- `clog`：用于输出程序运行时的一般性消息

`cin`为istream类型，`cout`、`cerr`、`clog`均为ostream类型



#### 输出

例：输出“Hello World”

```cpp
std::cout << "Hello World" << std::endl;
```

- **输出运算符**：`<<`

  - 接收两个运算对象：左侧为ostream，右侧为要输出的值
  - 运算过程：从右侧的运算对象读入信息写入流
  - 计算结果（返回值）：为左侧的运算对象，即我们写入给定值的ostream

- **操纵符**（manipulator）：`endl`

  - 是一种特殊的值，操纵符有很多`endl`是其中一个操纵符

  - 写入该值的作用：每个操纵符都有自己独特的作用

    eg: `endl`

    - 可理解为end line

    - 结束当前行

    - 将缓冲区中的内容刷新到设备中，以保证程序所产生的输出都写入了输出流中，而不是停留在缓冲区中

- **作用域运算符**：`::`

  - 我们可以通过作用运算符访问命名空间（namespace）中的名字
  - 标准库中的所有名字都定义在标准命名空间std中，当我们要使用cout或cin时，需要通过作用域运算符指定使用名字的命名空间，如：`std::cout`

- 注意点：

  - 输出时可以小范围内不控制输出对象的类型，标准库包含了一系列不同版本的输入输出运算符可自动处理，最后统一转化为字符序列输出

  - 整个输出过程在执行时，为了效率，先把要输出的数据顺序存放在缓冲区（buffer）中，得到最终的写入指令后才会一并输出，同时清空缓冲区｡可以清空缓冲区的方法有**函数返回**、**缓冲区被填满**、**遇到特殊操纵符（如`endl`）**与**流发生关联**等情况

    

示例代码做了两次输出，等价于

```cpp
(std::cout << "Hello World") << std::endl;
```

也等价于

```cpp
std::cout << "Hello World";
std::cout << std::endl;
```



#### 输入

例：从键盘中输入两个值分别作为v1和v2的值

```cpp
std::cin >> v1 >> v2;
```

- **输入运算符**：`>>`
  - 接收两个运算对象：左侧为istream，右侧为存储输入数值的变量（variable）
  - 运算过程：从给定的istream中读入数据，并存入右侧的变量中
  - 计算结果（返回值）：为左侧的运算对象，即给定的istream
- 注意点：
  - cin读取输入时会跳过空格、制表符和换行符（空白字符）
  - 输入值应与变量的类型相对应，否则容易出错



示例代码做了两次输入，等价于

```cpp
(std::cin >> v1) >> v2;
```

也等价于

```cpp
std::cin >> v1;
std::cin >> v2;
```

